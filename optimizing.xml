<mujoco model="finger with orthotic">
    <option timestep="0.001" iterations="100" solver="Newton" tolerance="1e-8" integrator="implicitfast">
        <flag gravity="disable" contact="disable" energy="enable" />
    </option>

    <compiler angle="degree" />

    <visual>
        <rgba haze=".3 .3 .3 1" />
    </visual>

    <default>
        <joint type="hinge" pos="0 0 0" axis="0 0 1" stiffness="7.412998647196484" damping="0.03706499323598242" />
        <site size="0.06" rgba="1 0 0 .2" />
        <geom type="capsule" size="0.01" rgba=".1 .1 .1 1" />
        <tendon width="0.01" rgba="0 1 1 1" />
    </default>

    <asset>
        <texture type="skybox" builtin="gradient" rgb1="0.6 0.6 0.6" rgb2="0 0 0" width="512" height="512" />
        <texture name="texplane" type="2d" builtin="checker" rgb1=".25 .25 .25" rgb2=".3 .3 .3" width="512" height="512" mark="cross" markrgb=".8 .8 .8" />
        <material name="matplane" reflectance="0.3" texture="texplane" texrepeat="1 1" texuniform="true" />
    </asset>

    <worldbody>
        <light directional="true" diffuse=".8 .8 .8" specular=".2 .2 .2" pos="0 0 5" dir="0 0 -1" />
        <camera name="cam" pos="0 0 -1.2" xyaxes="1.000 0 0 0 -1.000 0" />

        <body name="finger" pos="0 0 0">
            <geom name="finger1" type="capsule" size="0.06" fromto="0 0 0  -.25 0 0" rgba=".5 .1 .1 1" />
            <site name="sPIPL" pos="-.1 0 0" size="0.12" />

            <body pos="0 0 0">
                <geom name="finger2" type="capsule" size="0.05" fromto="0 0 0  .25 0 0" rgba=".5 .1 .1 1" />
                <joint name="PIP" pos="0 0 0" stiffness="0" damping="0" />
                <site name="sPIPR" pos=".1 0 0" size="0.12" />
                
                <body pos=".25 0 0">
                    <geom name="finger3" type="capsule" size="0.04" fromto="0 0 0  .25 0 0" rgba=".5 .1 .1 1" />
                </body>
            </body>
        </body>

        <body name="orthosis" pos="0 0 -.1">
            <geom name="beamB" type="capsule" size="0.04" fromto="0.0 0.0 0.0 -0.25 -3.061616997868383e-17 0.0" />
            <site name="hBAL" pos="-.1 0 0" size="0.06" />
            
            <body name="Bnext" pos="0 0 0">
                <joint name="hingeBA" type="hinge" pos="0 0 0" axis="0 0 1" stiffness="7.412998647196484" damping="0.03706499323598242" />        
                <site name="hBAR" pos=".1 0 0" size="0.06" />
                <geom name="beamA" type="capsule" size="0.04" fromto="0.0 0.0 0.0 0.39999936248303747 0.0 0.0" />
                
                <body name="Anext" pos="0.39999936248303747 0.0 0.0">
                    <joint name="hingeAL" type="hinge" pos="0 0 0" axis="0 0 1" stiffness="7.412998647196484" damping="0.03706499323598242" />      
                    <geom name="smallBodyAL" type="sphere" size="0.04" pos="0 0 0" />
                    <site name="hAL" pos="0 0 0" size="0.06" />
                </body>     
            </body>
            
            <geom name="beamD" type="capsule" size="0.04" fromto="-0.25 -3.061616997868383e-17 0.0 -0.09271870971192642 -0.03746079034921514 0.0" />
            <body name="Dnext" pos="-0.09271870971192642 -0.03746079034921514 0.0">
                <joint name="hingeDL" type="hinge" pos="0 0 0" axis="0 0 -1" stiffness="7.412998647196484" damping="0.03706499323598242" />
                <geom name="smallBodyDL" type="sphere" size="0.04" pos="0 0 0" />
                <site name="hDL" pos="0 0 0" size="0.06" />
            </body> 
        </body>
    </worldbody>

    <equality>
        
        <weld site1="hBAR" site2="sPIPR" />  
        
    </equality>

    
    
    <tendon>
        <spatial name="bendingTendon" limited="true" range="0.49414007070982374 0.9882801414196475" width="0.01" solimplimit="0.001 0.8 0.001 0.5 2" solreflimit="-44197.99650899748 -0.2209899825449874">
            <site site="hDL" />
            <site site="hAL" />
        </spatial>
        
        
        
        <spatial name="extensionTendon" limited="true" range="0 0.49414007070982374" width="0.01" solimplimit="0.001 0.001 0.001 0.5 1" solreflimit="-202363.59765860933 -6745.453255286978">    
            <site site="hDL" />
            <site site="hAL" />
        </spatial>
    </tendon>

    <actuator>
        <motor name="finger_bend" joint="PIP" ctrlrange="-10 10" gear="100" />
    </actuator>

    <sensor>
        <force name="finger_force" site="sPIPR" />
        <torque name="finger_torque" site="sPIPR" />
        <force name="tendon_force" site="hDL" />
    </sensor>
</mujoco>